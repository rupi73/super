var TableData=function(){"use strict";var e=function(){var e=!1,a=null;function t(e,a){for(var t=e.fnGetData(a),n=0,s=$(">td",a).length;n<s;n++)e.fnUpdate(t[n],a,n,!1);e.fnDraw()}function n(e,a){var t=e.fnGetData(a),n=$(">td",a);n[0].innerHTML='<input type="text" class="form-control" value="'+t[0]+'">',n[1].innerHTML='<input type="text" class="form-control" value="'+t[1]+'">',n[2].innerHTML='<input type="text" class="form-control" value="'+t[2]+'">',n[3].innerHTML='<a class="save-row" href="">Save</a>',n[4].innerHTML='<a class="cancel-row" href="">Cancel</a>'}$("body").on("click",".add-row",function(l){if(l.preventDefault(),0==e){a&&t(s,a),e=!0;var o=s.fnAddData(["","","","",""]),r=s.fnGetNodes(o[0]);n(s,r),a=r}}),$("#sample_2").on("click",".cancel-row",function(n){if(n.preventDefault(),e){e=!1,a=null;var l=$(this).parents("tr")[0];s.fnDeleteRow(l)}else t(s,a),a=null}),$("#sample_2").on("click",".delete-row",function(t){t.preventDefault(),e&&a&&(s.fnDeleteRow(a),e=!1);var n=$(this).parents("tr")[0];swal({title:"Delete",text:"Are you sure to delete this row?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",closeOnConfirm:!0,closeOnCancel:!1},function(e){e&&($.blockUI({message:'<i class="fa fa-spinner fa-spin"></i> Do some ajax to sync with backend...',baseZ:2e3}),$.mockjax({url:"/tabledata/delete/webservice",dataType:"json",responseTime:1e3,responseText:{say:"ok"}}),$.ajax({url:"/tabledata/delete/webservice",dataType:"json",success:function(e){$.unblockUI(),"ok"==e.say&&(s.fnDeleteRow(n),swal("Deleted!","Your imaginary file has been deleted.","success"))}}))})}),$("#sample_2").on("click",".save-row",function(t){t.preventDefault();var n=$(this).parents("tr")[0];$.blockUI({message:'<i class="fa fa-spinner fa-spin"></i> Do some ajax to sync with backend...',baseZ:2e3}),$.mockjax({url:"/tabledata/add/webservice",dataType:"json",responseTime:1e3,responseText:{say:"ok"}}),$.ajax({url:"/tabledata/add/webservice",dataType:"json",success:function(t){var l,o,r;$.unblockUI(),"ok"==t.say&&(l=s,o=n,r=$("input",o),l.fnUpdate(r[0].value,o,0,!1),l.fnUpdate(r[1].value,o,1,!1),l.fnUpdate(r[2].value,o,2,!1),l.fnUpdate('<a class="edit-row" href="">Edit</a>',o,3,!1),l.fnUpdate('<a class="delete-row" href="">Delete</a>',o,4,!1),l.fnDraw(),e=!1,a=null)}})}),$("#sample_2").on("click",".edit-row",function(l){l.preventDefault(),a&&(e?(s.fnDeleteRow(a),e=!1):t(s,a));var o=$(this).parents("tr")[0];n(s,o),a=o});var s=$("#sample_2").dataTable({aoColumnDefs:[{aTargets:[0]}],oLanguage:{sLengthMenu:"Show _MENU_ Rows",sSearch:"",oPaginate:{sPrevious:"",sNext:""}},aaSorting:[[1,"asc"]],aLengthMenu:[[5,10,15,20,-1],[5,10,15,20,"All"]],iDisplayLength:10});$("#sample_2_wrapper .dataTables_filter input").addClass("form-control input-sm").attr("placeholder","Search"),$("#sample_2_wrapper .dataTables_length select").addClass("m-wrap small"),$("#sample_2_wrapper .dataTables_length select").select2(),$('#sample_2_column_toggler input[type="checkbox"]').change(function(){var e=parseInt($(this).attr("data-column")),a=s.fnSettings().aoColumns[e].bVisible;s.fnSetColumnVis(e,!a)})};return{init:function(){var a;a=$("#sample_1").dataTable({aoColumnDefs:[{aTargets:[0]}],oLanguage:{sLengthMenu:"Show _MENU_ Rows",sSearch:"",oPaginate:{sPrevious:"",sNext:""}},aaSorting:[[1,"asc"]],aLengthMenu:[[5,10,15,20,-1],[5,10,15,20,"All"]],iDisplayLength:10}),$("#sample_1_wrapper .dataTables_filter input").addClass("form-control input-sm").attr("placeholder","Search"),$("#sample_1_wrapper .dataTables_length select").addClass("m-wrap small"),$("#sample_1_wrapper .dataTables_length select").select2(),$('#sample_1_column_toggler input[type="checkbox"]').change(function(){var e=parseInt($(this).attr("data-column")),t=a.fnSettings().aoColumns[e].bVisible;a.fnSetColumnVis(e,!t)}),e()}}}();